/*! d3to3 2015-05-16 */
var d3to3=function(){function a(){}function b(){}var c={},d={};c.loaded=!1,c.model={axis:{x:[],y:[]},content:[],canvas:{width:null,height:null}},c.initializer={init:function(){"undefined"!=typeof d3&&window.WebGLRenderingContext&&document.createElement("canvas").getContext("webgl")&&(d=Object.create(d3),c.loaded=!0)}}.init(),observerFactory=new b,c.scale={},c.svg={},c.layout={},c.event={},c.behavior={},c.geo={},c.geom={},c.ns=d3.ns,c.format=d3.format,c.random=d3.random,c.interpolators=d3.interpolators,c.svg.symbolTypes=d3.svg.symbolTypes,c.setup=function(){var a=d.selection.prototype.selectAll,b=d.selection.prototype.select,e=d.selection.prototype.data,f=d.selection.prototype.attr;hook_classed=d.selection.prototype.classed,hook_style=d.selection.prototype.style,hook_property=d.selection.prototype.property,hook_text=d.selection.prototype.text,hook_html=d.selection.prototype.html,hook_append=d.selection.prototype.append,hook_insert=d.selection.prototype.insert,hook_remove=d.selection.prototype.remove,hook_datum=d.selection.prototype.datum,hook_filter=d.selection.prototype.filter,hook_order=d.selection.prototype.order,hook_sort=d.selection.prototype.sort,hook_each=d.selection.prototype.each,hook_call=d.selection.prototype.call,hook_empty=d.selection.prototype.empty,hook_node=d.selection.prototype.node,hook_size=d.selection.prototype.size,hook_enter_append=d.selection.enter.prototype.append,hook_enter_empty=d.selection.enter.prototype.empty,hook_enter_node=d.selection.enter.prototype.node,hook_enter_call=d.selection.enter.prototype.call,hook_enter_select=d.selection.enter.prototype.select,hook_enter_insert=d.selection.enter.prototype.insert,hook_enter_size=d.selection.enter.prototype.size,d.selection.enter.prototype.empty=function(){return hook_enter_empty.apply(this,arguments)},d.selection.enter.prototype.node=function(){return hook_enter_node.apply(this,arguments)},d.selection.enter.prototype.call=function(){return hook_enter_call.apply(this,arguments)},d.selection.enter.prototype.select=function(){return hook_enter_select.apply(this,arguments)},d.selection.enter.prototype.insert=function(){return hook_enter_insert.apply(this,arguments)},d.selection.enter.prototype.size=function(){return hook_enter_size.apply(this,arguments)},d.selection.prototype.selectAll=function(){return a.apply(this,arguments)},d.selection.prototype.select=function(){return b.apply(this,arguments)},d.selection.prototype.classed=function(){return hook_classed.apply(this,arguments)},d.selection.prototype.style=function(){return hook_style.apply(this,arguments)},d.selection.prototype.property=function(){return hook_property.apply(this,arguments)},d.selection.prototype.text=function(){return hook_text.apply(this,arguments)},d.selection.prototype.html=function(){return hook_html.apply(this,arguments)},d.selection.prototype.insert=function(){return hook_insert.apply(this,arguments)},d.selection.prototype.remove=function(){return hook_remove.apply(this,arguments)},d.selection.prototype.datum=function(){return hook_datum.apply(this,arguments)},d.selection.prototype.filter=function(){return hook_filter.apply(this,arguments)},d.selection.prototype.order=function(){return hook_order.apply(this,arguments)},d.selection.prototype.sort=function(){return hook_sort.apply(this,arguments)},d.selection.prototype.call=function(){return hook_call.apply(this,arguments)},d.selection.prototype.empty=function(){return hook_empty.apply(this,arguments)},d.selection.prototype.node=function(){return hook_node.apply(this,arguments)},d.selection.prototype.size=function(){return hook_size.apply(this,arguments)},d.selection.prototype.data=function(){return e.apply(this,arguments)},d.selection.enter.prototype.append=function(){hook_append.apply(this,arguments);return"circle"==arguments[0]&&observerFactory.observe(observerFactory.type("each").expectKeyType(typeof[]).then(function(a){[].forEach.call(a,function(a){c.model.content.push(a)})})),hook_append.apply(this,arguments)},d.selection.prototype.each=function(){var a=hook_each.apply(this,arguments);return observerFactory.notify({type:"each",keyType:typeof[],value:a[0]}),hook_each.apply(this,arguments)},d.selection.prototype.attr=function(){return console.log("================ ATTR ================ "),observerFactory.notify({type:"attr",key:arguments[0],value:arguments[1]}),f.apply(this,arguments)},d.selection.prototype.append=function(){return console.log("================ APPEND ================ "),observerFactory.notify({type:"append",key:arguments[0],value:arguments[1]}),"svg"===arguments[0]&&observerFactory.observe(observerFactory.type("attr").expectKey("width").then(function(a){c.model.canvas.width=a}),observerFactory.type("attr").expectKey("height").then(function(a){c.model.canvas.height=a}),observerFactory.type("append").expectKey("g").then(function(a){}),observerFactory.type("attr").expectKey("transform").then(function(a){c.model.canvas.transform=a})),hook_append.apply(this,arguments)},c.min=function(a,b){return d.min(a,b)},c.max=function(a,b){return d.max(a,b)},c.sum=function(a,b){return d.sum(a,b)},c.extend=function(a,b){return d.extend(a,b)},c.mean=function(a,b){return d.mean(a,b)},c.extend=function(a,b){return d.extend(a,b)},c.ascending=function(a,b){return d.ascending(a,b)},c.descending=function(a,b){return d.descending(a,b)},c.quantile=function(a,b){return d.quantile(a,b)},c.median=function(a,b){return d.median(a,b)},c.variance=function(a,b){return d.variance(a,b)},c.deviation=function(a,b){return d.deviation(a,b)},c.bisectLeft=function(a,b,c,e){return d.bisectLeft(a,b,c,e)},c.bisectRight=function(a,b,c,e){return d.bisectRight(a,b,c,e)},c.bisector=function(a){return d.bisector(a)},c.shuffle=function(a,b,c){return d.shuffle(a,b,c)},c.pairs=function(a){return d.pairs(a)},c.permute=function(a,b){return d.permute(a,b)},c.zip=function(){return d.zip()},c.transpose=function(a){return d.transpose(a)},c.keys=function(a){return d.keys(a)},c.values=function(a){return d.values(a)},c.entries=function(a){return d.entries(a)},c.map=function(a,b){return d.map(a,b)},c.nest=function(){return d.nest()},c.set=function(a){return d.set(a)},c.rebind=function(a,b){return d.rebind(a,b)},c.dispatch=function(){return d.dispatch()},c.requote=function(a){return d.requote(a)},c.select=function(a){return d.select(a)},c.selection=function(){return d.selection()},c.mouse=function(a){return d.mouse(a)},c.touch=function(a){return d.touch(a)},c.color=function(){return d.color()},c.hsl=function(a,b,c){return d.color(a,b,c)},c.hcl=function(a,b,c){return d.hcl(a,b,c)},c.lab=function(a,b,c){return d.lab(a,b,c)},c.rgb=function(a,b,c){return d.rgb(a,b,c)},c.geo.area=function(a){return d.geo.area(a)},c.geo.bounds=function(){return d.geo.bounds()},c.geo.centroid=function(a){return d.geo.centroid(a)},c.geo.clipExtent=function(){return d.geo.clipExtent()},c.geo.conicEqualArea=function(){return d.geo.conicEqualArea()},c.geo.albers=function(){return d.geo.albers()},c.geo.albersUsa=function(){return d.geo.albersUsa()},c.geo.path=function(){return d.geo.path()},c.geo.transform=function(a){return d.geo.transform(a)},c.geo.projection=function(a){return d.geo.projection(a)},c.geo.equirectangular=function(){return d.geo.equirectangular()},c.geo.rotation=function(a){return d.geo.rotation(a)},c.geo.circle=function(){return d.geo.circle()},c.geo.distance=function(a,b){return d.geo.distance(a,b)},c.geo.graticule=function(){return d.geo.graticule()},c.geo.greatArc=function(){return d.geo.greatArc()},c.geo.length=function(a){return d.geo.length(a)},c.geo.azimuthalEqualArea=function(){return d.geo.azimuthalEqualArea()},c.geo.azimuthalEquidistant=function(){return d.geo.azimuthalEquidistant()},c.geo.conicConformal=function(){return d.geo.conicConformal()},c.geo.conicEquidistant=function(){return d.geo.conicEquidistant()},c.geo.gnomonic=function(){return d.geo.gnomonic()},c.geo.mercator=function(){return d.geo.mercator()},c.geo.orthographic=function(){return d.geo.orthographic()},c.geo.stereographic=function(){return d.geo.stereographic()},c.geo.transverseMercator=function(){return d.geo.transverseMercator()},c.geo.stream=function(a,b){return d.geo.stream(a,b)},c.geo.interpolate=function(a,b){return d.geo.interpolate(a,b)},c.geo.projectionMutator=function(a){return d.geo.projectionMutator(a)},c.geom.hull=function(a){return d.geom.hull(a)},c.geom.polygon=function(a){return d.geom.polygon(a)},c.geom.voronoi=function(a){return d.geom.voronoi(a)},c.geom.delaunay=function(a){return d.geom.delaunay(a)},c.geom.quadtree=function(a,b,c,e,f){return d.geom.quadtree(a,b,c,e,f)},c.behavior.drag=function(){return d.behavior.drag()},c.functor=function(a){return d.functor(a)},c.xhr=function(a){return d.xhr(a)},c.dsv=function(a,b){return d.dsv(a,b)},c.csv=function(a,b){return d.csv(a,b)},c.tsv=function(a,b){return d.tsv(a,b)},c.touches=function(a,b){return d.touches(a,b)},c.interpolateZoom=function(a,b){return d.interpolateZoom(a,b)},c.behavior.zoom=function(){return d.behavior.zoom()},c.timer=function(a,b,c){return d.timer(a,b,c)},c.timer.flush=function(){return d.timer.flush()},c.round=function(a,b){return d.round(a,b)},c.formatPrefix=function(a,b){return d.formatPrefix(a,b)},c.locale=function(a){return d.locale(a)},c.interpolateRgb=function(a,b){return d.interpolateRgb(a,b)},c.interpolateObject=function(a,b){return d.interpolateObject(a,b)},c.interpolateRgbNumber=function(a,b){return d.interpolateRgbNumber(a,b)},c.interpolateString=function(a,b){return d.interpolateString(a,b)},c.interpolate=function(a,b){return d.interpolate(a,b)},c.interpolateArray=function(a,b){return d.interpolateArray(a,b)},c.ease=function(a){return d.ease(a)},c.interpolateHcl=function(a,b){return d.interpolateHcl(a,b)},c.interpolateHsl=function(a,b){return d.interpolateHsl(a,b)},c.interpolateLab=function(a,b){return d.interpolateLab(a,b)},c.interpolateRound=function(a,b){return d.interpolateRound(a,b)},c.interpolateTransform=function(a,b){return d.interpolateTransform(a,b)},c.transform=function(a){return d.transform(a)},c.transition=function(a,b){return d.transition(a,b)},c.scale.category10=function(){return d.scale.category10()},c.scale.category20=function(){return d.scale.category20()},c.scale.category20b=function(){return d.scale.category20b()},c.scale.category20c=function(){return d.scale.category20c()},c.scale.sqrt=function(){return d.scale.sqrt()},c.scale.pow=function(){return d.scale.pow()},c.scale.quantile=function(){return d.scale.quantile()},c.scale.threshold=function(){return d.scale.threshold()},c.scale.ordinal=function(){return d.scale.ordinal()},c.scale.log=function(){return d.scale.log()},c.layout.bundle=function(){return d.layout.bundle()},c.layout.chord=function(){return d.layout.chord()},c.layout.force=function(){return d.layout.force()},c.layout.hierarchy=function(){return d.layout.hierarchy()},c.layout.partition=function(){return d.layout.partition()},c.layout.pie=function(){return d.layout.pie()},c.layout.stack=function(){return d.layout.stack()},c.layout.histogram=function(){return d.layout.histogram()},c.layout.pack=function(){return d.layout.pack()},c.layout.tree=function(){return d.layout.tree()},c.layout.treemap=function(){return d.layout.treemap()},c.layout.cluster=function(){return d.layout.cluster()},c.svg.axis=function(){return d.svg.axis()},c.svg.arc=function(){return d.svg.arc()},c.svg.line=function(){return d.svg.line()},c.svg.brush=function(){return d.svg.brush()},c.svg.area=function(){return d.svg.area()},c.svg.area.radial=function(){return d.svg.area.radial()},c.svg.radial=function(){return d.svg.radial()},c.svg.chord=function(){return d.svg.chord()},c.svg.diagonal=function(){return d.svg.diagonal()},c.svg.diagonal.radial=function(){return d.svg.diagonal.radial()},c.svg.sumbol=function(){return d.svg.sumbol()},c.text=function(a){return d.text(a)},c.xml=function(a){return d.xml(a)},c.json=function(a,b){return d.json(a,b)},c.html=function(a,b){return d.html(a,b)}},a.prototype.type=function(b){var c=b;return"function"!=typeof a[c],"function"!=typeof a[c].prototype.drive&&(a[c].prototype=new a),new a[c]},a.circle=function(){this.type="circle",this.meshes=[]},a.line=function(){this.type="line",this.meshes=[]},a.prototype.loadData=function(a){var b=this,d=f(c.model.canvas.transform),g=function(){a.forEach(function(a){var f=a.r.baseVal.value,g=a.cx.baseVal.value,h=a.cy.baseVal.value;color=e(a.style.cssText.slice(6));var i,j;i=g<=c.model.canvas.width?-(c.model.canvas.width/2-g):c.model.canvas.width/2-g,j=h<=c.model.canvas.height?c.model.canvas.height/2-h:-(c.model.canvas.height/2-h),i+=d.x,j-=d.y;var k=(new THREE.MeshBasicMaterial({color:color}),new THREE.CircleGeometry(f,64)),l=new THREE.Mesh(k,new THREE.MeshBasicMaterial({color:color}));l.position.set(i,j,0),b.meshes.push(l)})};return"circle"==this.type&&g(),this},a.prototype.toGroup=function(b){return this.meshes.forEach(function(a){b&&b instanceof THREE.Group&&b.add(a)}),a.meshes=[],this},c.render=function(b){function d(){l.type("circle").loadData(c.model.content).toGroup(j),c.model.content={},i.add(g),i.add(j),h.render(i,g),k.appendChild(h.domElement)}function e(){requestAnimationFrame(e),f()}function f(){h.render(i,g)}var g,h,i,j,k,l;!function(){var d=function(){l=new a,i=new THREE.Scene,k=document.getElementById(b),g=new THREE.PerspectiveCamera(115,(c.model.canvas.width||window.innerWidth)/(c.model.canvas.height||window.innerHeight),1,1e3),g.position.set(0,0,100),j=new THREE.Group,j.position.set(0,0,0),h=new THREE.WebGLRenderer({antialias:!0}),h.setClearColor(16777215),h.setPixelRatio(window.devicePixelRatio),h.setSize(c.model.canvas.width||window.innerWidth,c.model.canvas.height||window.innerHeight)},e=function(){};d(),e()}(),d(),e()};var e=function(a){var b,c,d,e=function(a){var b=a.toString(16);return 1==b.length?"0"+b:b};if("object"==typeof tests&&3==tests.length)b=a[0],c=a[1],d=a[2];else{var f=/\(([^)]+)\)/.exec(a)[1].split(",");b=parseInt(f[0]),c=parseInt(f[1]),d=parseInt(f[2])}return"#"+e(b)+e(c)+e(d)},f=function(a){var b=/\(([^)]+)\)/.exec(a)[1].split(","),c=parseInt(b[0])||0,d=parseInt(b[1])||0;return{x:c,y:d}};return b.queue=[],b.prototype.observe=function(){return[].forEach.call(arguments,function(a){a&&b.queue.push(a)}),this},b.prototype.then=function(a){return this.callback=a||{},this},b.prototype.expectKeyType=function(a){return this.expectedType=a,this},b.prototype.expectKey=function(a){return this.expectedKey=a,this},b.prototype.type=function(a){var c=a;return"function"!=typeof b[c],"function"!=typeof b[c].prototype.drive&&(b[c].prototype=new b),new b[c]},b.attr=function(){this.type="attr"},b.each=function(){this.type="each"},b.append=function(){this.type="append"},b.prototype.notify=function(a){var c=a.key||{},d=a.keyType||{},e=a.value||{},f=a.type||{};b.hasOwnProperty(f)&&b.queue.some(function(a,g){return a.type==f&&a.expectedKey==c||a.expectedType==d?("function"==typeof a.callback&&null!=e&&a.callback(e),b.queue.splice(g,1),!0):void 0})},c.loaded&&(c.setup(),window.d3=d),c}();