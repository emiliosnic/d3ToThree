/*! d3to3 2015-05-17 */
var d3to3=function(){function a(){}function b(a,c){if(arguments.length>2)[].forEach.call(arguments,function(c){b(a,c)});else for(var d in c)a[d]=c[d];return a}var c={},d={};if(c.loaded=!1,c.about={name:"d3to3",version:"0.0.1"},c.config={},c.model={axis:{x:[],y:[]},canvas:{offsets:{x:40,y:20},width:null,height:null},content:[]},c.initializer={init:function(){"undefined"!=typeof d3&&window.WebGLRenderingContext&&document.createElement("canvas").getContext("webgl")&&(d=Object.create(d3),c.loaded=!0)}}.init(),c.loaded){b(d3.selection.prototype,{d3to3:function(){return this.canvas=function(){return c.model.canvas.width=this[0].extractNode("svg").width.baseVal.value,c.model.canvas.height=this[0].extractNode("svg").height.baseVal.value,this},this.axis=function(){return this.x=function(){return c.model.axis.x=this[0].extractNode("g").childNodes,this},this.y=function(){return c.model.axis.y=this[0].extractNode("g").childNodes,this},this},this.data=function(){return c.model.content=this[0],this},this}}),c.scale={},c.svg={},c.layout={},c.event={},c.behavior={},c.geo={},c.geom={},c.ns=d3.ns,c.format=d3.format,c.random=d3.random,c.interpolators=d3.interpolators,c.svg.symbolTypes=d3.svg.symbolTypes,c.setup=function(){var a=d.selection.prototype.selectAll,b=d.selection.prototype.select,e=d.selection.prototype.data,f=d.selection.prototype.attr;hook_classed=d.selection.prototype.classed,hook_style=d.selection.prototype.style,hook_property=d.selection.prototype.property,hook_text=d.selection.prototype.text,hook_html=d.selection.prototype.html,hook_append=d.selection.prototype.append,hook_insert=d.selection.prototype.insert,hook_remove=d.selection.prototype.remove,hook_datum=d.selection.prototype.datum,hook_filter=d.selection.prototype.filter,hook_order=d.selection.prototype.order,hook_sort=d.selection.prototype.sort,hook_each=d.selection.prototype.each,hook_call=d.selection.prototype.call,hook_empty=d.selection.prototype.empty,hook_node=d.selection.prototype.node,hook_size=d.selection.prototype.size,hook_enter_append=d.selection.enter.prototype.append,hook_enter_empty=d.selection.enter.prototype.empty,hook_enter_node=d.selection.enter.prototype.node,hook_enter_call=d.selection.enter.prototype.call,hook_enter_select=d.selection.enter.prototype.select,hook_enter_insert=d.selection.enter.prototype.insert,hook_enter_size=d.selection.enter.prototype.size,d.selection.enter.prototype.empty=function(){return hook_enter_empty.apply(this,arguments)},d.selection.enter.prototype.node=function(){return hook_enter_node.apply(this,arguments)},d.selection.enter.prototype.call=function(){return hook_enter_call.apply(this,arguments)},d.selection.enter.prototype.select=function(){return hook_enter_select.apply(this,arguments)},d.selection.enter.prototype.insert=function(){return hook_enter_insert.apply(this,arguments)},d.selection.enter.prototype.size=function(){return hook_enter_size.apply(this,arguments)},d.selection.enter.prototype.append=function(){return hook_append.apply(this,arguments)},d.selection.prototype.selectAll=function(){return a.apply(this,arguments)},d.selection.prototype.select=function(){return b.apply(this,arguments)},d.selection.prototype.classed=function(){return hook_classed.apply(this,arguments)},d.selection.prototype.style=function(){return hook_style.apply(this,arguments)},d.selection.prototype.property=function(){return hook_property.apply(this,arguments)},d.selection.prototype.text=function(){return hook_text.apply(this,arguments)},d.selection.prototype.html=function(){return hook_html.apply(this,arguments)},d.selection.prototype.insert=function(){return hook_insert.apply(this,arguments)},d.selection.prototype.remove=function(){return hook_remove.apply(this,arguments)},d.selection.prototype.datum=function(){return hook_datum.apply(this,arguments)},d.selection.prototype.filter=function(){return hook_filter.apply(this,arguments)},d.selection.prototype.order=function(){return hook_order.apply(this,arguments)},d.selection.prototype.sort=function(){return hook_sort.apply(this,arguments)},d.selection.prototype.empty=function(){return hook_empty.apply(this,arguments)},d.selection.prototype.node=function(){return hook_node.apply(this,arguments)},d.selection.prototype.size=function(){return hook_size.apply(this,arguments)},d.selection.prototype.data=function(){return e.apply(this,arguments)},d.selection.prototype.call=function(){return hook_call.apply(this,arguments)},d.selection.prototype.each=function(){return hook_each.apply(this,arguments)},d.selection.prototype.attr=function(){return f.apply(this,arguments)},d.selection.prototype.append=function(){return hook_append.apply(this,arguments)},c.min=function(a,b){return d.min(a,b)},c.max=function(a,b){return d.max(a,b)},c.sum=function(a,b){return d.sum(a,b)},c.extend=function(a,b){return d.extend(a,b)},c.mean=function(a,b){return d.mean(a,b)},c.extend=function(a,b){return d.extend(a,b)},c.ascending=function(a,b){return d.ascending(a,b)},c.descending=function(a,b){return d.descending(a,b)},c.quantile=function(a,b){return d.quantile(a,b)},c.median=function(a,b){return d.median(a,b)},c.variance=function(a,b){return d.variance(a,b)},c.deviation=function(a,b){return d.deviation(a,b)},c.bisectLeft=function(a,b,c,e){return d.bisectLeft(a,b,c,e)},c.bisectRight=function(a,b,c,e){return d.bisectRight(a,b,c,e)},c.bisector=function(a){return d.bisector(a)},c.shuffle=function(a,b,c){return d.shuffle(a,b,c)},c.pairs=function(a){return d.pairs(a)},c.permute=function(a,b){return d.permute(a,b)},c.zip=function(){return d.zip()},c.transpose=function(a){return d.transpose(a)},c.keys=function(a){return d.keys(a)},c.values=function(a){return d.values(a)},c.entries=function(a){return d.entries(a)},c.map=function(a,b){return d.map(a,b)},c.nest=function(){return d.nest()},c.set=function(a){return d.set(a)},c.rebind=function(a,b){return d.rebind(a,b)},c.dispatch=function(){return d.dispatch()},c.requote=function(a){return d.requote(a)},c.select=function(a){return d.select(a)},c.selection=function(){return d.selection()},c.mouse=function(a){return d.mouse(a)},c.touch=function(a){return d.touch(a)},c.color=function(){return d.color()},c.hsl=function(a,b,c){return d.color(a,b,c)},c.hcl=function(a,b,c){return d.hcl(a,b,c)},c.lab=function(a,b,c){return d.lab(a,b,c)},c.rgb=function(a,b,c){return d.rgb(a,b,c)},c.geo.area=function(a){return d.geo.area(a)},c.geo.bounds=function(){return d.geo.bounds()},c.geo.centroid=function(a){return d.geo.centroid(a)},c.geo.clipExtent=function(){return d.geo.clipExtent()},c.geo.conicEqualArea=function(){return d.geo.conicEqualArea()},c.geo.albers=function(){return d.geo.albers()},c.geo.albersUsa=function(){return d.geo.albersUsa()},c.geo.path=function(){return d.geo.path()},c.geo.transform=function(a){return d.geo.transform(a)},c.geo.projection=function(a){return d.geo.projection(a)},c.geo.equirectangular=function(){return d.geo.equirectangular()},c.geo.rotation=function(a){return d.geo.rotation(a)},c.geo.circle=function(){return d.geo.circle()},c.geo.distance=function(a,b){return d.geo.distance(a,b)},c.geo.graticule=function(){return d.geo.graticule()},c.geo.greatArc=function(){return d.geo.greatArc()},c.geo.length=function(a){return d.geo.length(a)},c.geo.azimuthalEqualArea=function(){return d.geo.azimuthalEqualArea()},c.geo.azimuthalEquidistant=function(){return d.geo.azimuthalEquidistant()},c.geo.conicConformal=function(){return d.geo.conicConformal()},c.geo.conicEquidistant=function(){return d.geo.conicEquidistant()},c.geo.gnomonic=function(){return d.geo.gnomonic()},c.geo.mercator=function(){return d.geo.mercator()},c.geo.orthographic=function(){return d.geo.orthographic()},c.geo.stereographic=function(){return d.geo.stereographic()},c.geo.transverseMercator=function(){return d.geo.transverseMercator()},c.geo.stream=function(a,b){return d.geo.stream(a,b)},c.geo.interpolate=function(a,b){return d.geo.interpolate(a,b)},c.geo.projectionMutator=function(a){return d.geo.projectionMutator(a)},c.geom.hull=function(a){return d.geom.hull(a)},c.geom.polygon=function(a){return d.geom.polygon(a)},c.geom.voronoi=function(a){return d.geom.voronoi(a)},c.geom.delaunay=function(a){return d.geom.delaunay(a)},c.geom.quadtree=function(a,b,c,e,f){return d.geom.quadtree(a,b,c,e,f)},c.behavior.drag=function(){return d.behavior.drag()},c.functor=function(a){return d.functor(a)},c.xhr=function(a){return d.xhr(a)},c.dsv=function(a,b){return d.dsv(a,b)},c.csv=function(a,b){return d.csv(a,b)},c.tsv=function(a,b){return d.tsv(a,b)},c.touches=function(a,b){return d.touches(a,b)},c.interpolateZoom=function(a,b){return d.interpolateZoom(a,b)},c.behavior.zoom=function(){return d.behavior.zoom()},c.timer=function(a,b,c){return d.timer(a,b,c)},c.timer.flush=function(){return d.timer.flush()},c.round=function(a,b){return d.round(a,b)},c.formatPrefix=function(a,b){return d.formatPrefix(a,b)},c.locale=function(a){return d.locale(a)},c.interpolateRgb=function(a,b){return d.interpolateRgb(a,b)},c.interpolateObject=function(a,b){return d.interpolateObject(a,b)},c.interpolateRgbNumber=function(a,b){return d.interpolateRgbNumber(a,b)},c.interpolateString=function(a,b){return d.interpolateString(a,b)},c.interpolate=function(a,b){return d.interpolate(a,b)},c.interpolateArray=function(a,b){return d.interpolateArray(a,b)},c.ease=function(a){return d.ease(a)},c.interpolateHcl=function(a,b){return d.interpolateHcl(a,b)},c.interpolateHsl=function(a,b){return d.interpolateHsl(a,b)},c.interpolateLab=function(a,b){return d.interpolateLab(a,b)},c.interpolateRound=function(a,b){return d.interpolateRound(a,b)},c.interpolateTransform=function(a,b){return d.interpolateTransform(a,b)},c.transform=function(a){return d.transform(a)},c.transition=function(a,b){return d.transition(a,b)},c.scale.category10=function(){return d.scale.category10()},c.scale.category20=function(){return d.scale.category20()},c.scale.category20b=function(){return d.scale.category20b()},c.scale.category20c=function(){return d.scale.category20c()},c.scale.sqrt=function(){return d.scale.sqrt()},c.scale.pow=function(){return d.scale.pow()},c.scale.quantile=function(){return d.scale.quantile()},c.scale.threshold=function(){return d.scale.threshold()},c.scale.ordinal=function(){return d.scale.ordinal()},c.scale.log=function(){return d.scale.log()},c.layout.bundle=function(){return d.layout.bundle()},c.layout.chord=function(){return d.layout.chord()},c.layout.force=function(){return d.layout.force()},c.layout.hierarchy=function(){return d.layout.hierarchy()},c.layout.partition=function(){return d.layout.partition()},c.layout.pie=function(){return d.layout.pie()},c.layout.stack=function(){return d.layout.stack()},c.layout.histogram=function(){return d.layout.histogram()},c.layout.pack=function(){return d.layout.pack()},c.layout.tree=function(){return d.layout.tree()},c.layout.treemap=function(){return d.layout.treemap()},c.layout.cluster=function(){return d.layout.cluster()},c.svg.axis=function(){return d.svg.axis()},c.svg.arc=function(){return d.svg.arc()},c.svg.line=function(){return d.svg.line()},c.svg.brush=function(){return d.svg.brush()},c.svg.area=function(){return d.svg.area()},c.svg.area.radial=function(){return d.svg.area.radial()},c.svg.radial=function(){return d.svg.radial()},c.svg.chord=function(){return d.svg.chord()},c.svg.diagonal=function(){return d.svg.diagonal()},c.svg.diagonal.radial=function(){return d.svg.diagonal.radial()},c.svg.sumbol=function(){return d.svg.sumbol()},c.text=function(a){return d.text(a)},c.xml=function(a){return d.xml(a)},c.json=function(a,b){return d.json(a,b)},c.html=function(a,b){return d.html(a,b)}},THREE.TrackballControls=function(a,b){function c(a){l.enabled!==!1&&(window.removeEventListener("keydown",c),q=p,p===m.NONE&&(a.keyCode!==l.keys[m.ROTATE]||l.noRotate?a.keyCode!==l.keys[m.ZOOM]||l.noZoom?a.keyCode!==l.keys[m.PAN]||l.noPan||(p=m.PAN):p=m.ZOOM:p=m.ROTATE))}function d(a){l.enabled!==!1&&(p=q,window.addEventListener("keydown",c,!1))}function e(a){l.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),p===m.NONE&&(p=a.button),p!==m.ROTATE||l.noRotate?p!==m.ZOOM||l.noZoom?p!==m.PAN||l.noPan||(A.copy(F(a.pageX,a.pageY)),B.copy(A)):(w.copy(F(a.pageX,a.pageY)),x.copy(w)):(t.copy(G(a.pageX,a.pageY)),s.copy(t)),document.addEventListener("mousemove",f,!1),document.addEventListener("mouseup",g,!1),l.dispatchEvent(D))}function f(a){l.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),p!==m.ROTATE||l.noRotate?p!==m.ZOOM||l.noZoom?p!==m.PAN||l.noPan||B.copy(F(a.pageX,a.pageY)):x.copy(F(a.pageX,a.pageY)):(s.copy(t),t.copy(G(a.pageX,a.pageY))))}function g(a){l.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),p=m.NONE,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",g),l.dispatchEvent(E))}function h(a){if(l.enabled!==!1){a.preventDefault(),a.stopPropagation();var b=0;a.wheelDelta?b=a.wheelDelta/40:a.detail&&(b=-a.detail/3),w.y+=.01*b,l.dispatchEvent(D),l.dispatchEvent(E)}}function i(a){if(l.enabled!==!1){switch(a.touches.length){case 1:p=m.TOUCH_ROTATE,t.copy(G(a.touches[0].pageX,a.touches[0].pageY)),s.copy(t);break;case 2:p=m.TOUCH_ZOOM_PAN;var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;z=y=Math.sqrt(b*b+c*c);var d=(a.touches[0].pageX+a.touches[1].pageX)/2,e=(a.touches[0].pageY+a.touches[1].pageY)/2;A.copy(F(d,e)),B.copy(A);break;default:p=m.NONE}l.dispatchEvent(D)}}function j(a){if(l.enabled!==!1)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:s.copy(t),t.copy(G(a.touches[0].pageX,a.touches[0].pageY));break;case 2:var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;z=Math.sqrt(b*b+c*c);var d=(a.touches[0].pageX+a.touches[1].pageX)/2,e=(a.touches[0].pageY+a.touches[1].pageY)/2;B.copy(F(d,e));break;default:p=m.NONE}}function k(a){if(l.enabled!==!1){switch(a.touches.length){case 1:s.copy(t),t.copy(G(a.touches[0].pageX,a.touches[0].pageY));break;case 2:y=z=0;var b=(a.touches[0].pageX+a.touches[1].pageX)/2,c=(a.touches[0].pageY+a.touches[1].pageY)/2;B.copy(F(b,c)),A.copy(B)}p=m.NONE,l.dispatchEvent(E)}}var l=this,m={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=a,this.domElement=void 0!==b?b:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new THREE.Vector3;var n=1e-6,o=new THREE.Vector3,p=m.NONE,q=m.NONE,r=new THREE.Vector3,s=new THREE.Vector2,t=new THREE.Vector2,u=new THREE.Vector3,v=0,w=new THREE.Vector2,x=new THREE.Vector2,y=0,z=0,A=new THREE.Vector2,B=new THREE.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var C={type:"change"},D={type:"start"},E={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-b.clientLeft,this.screen.top=a.top+window.pageYOffset-b.clientTop,this.screen.width=a.width,this.screen.height=a.height}},this.handleEvent=function(a){"function"==typeof this[a.type]&&this[a.type](a)};var F=function(){var a=new THREE.Vector2;return function(b,c){return a.set((b-l.screen.left)/l.screen.width,(c-l.screen.top)/l.screen.height),a}}(),G=function(){var a=new THREE.Vector2;return function(b,c){return a.set((b-.5*l.screen.width-l.screen.left)/(.5*l.screen.width),(l.screen.height+2*(l.screen.top-c))/l.screen.width),a}}();this.rotateCamera=function(){var a,b=new THREE.Vector3,c=new THREE.Quaternion,d=new THREE.Vector3,e=new THREE.Vector3,f=new THREE.Vector3,g=new THREE.Vector3;return function(){g.set(t.x-s.x,t.y-s.y,0),a=g.length(),a?(r.copy(l.object.position).sub(l.target),d.copy(r).normalize(),e.copy(l.object.up).normalize(),f.crossVectors(e,d).normalize(),e.setLength(t.y-s.y),f.setLength(t.x-s.x),g.copy(e.add(f)),b.crossVectors(g,r).normalize(),a*=l.rotateSpeed,c.setFromAxisAngle(b,a),r.applyQuaternion(c),l.object.up.applyQuaternion(c),u.copy(b),v=a):!l.staticMoving&&v&&(v*=Math.sqrt(1-l.dynamicDampingFactor),r.copy(l.object.position).sub(l.target),c.setFromAxisAngle(u,v),r.applyQuaternion(c),l.object.up.applyQuaternion(c)),s.copy(t)}}(),this.zoomCamera=function(){var a;p===m.TOUCH_ZOOM_PAN?(a=y/z,y=z,r.multiplyScalar(a)):(a=1+(x.y-w.y)*l.zoomSpeed,1!==a&&a>0&&(r.multiplyScalar(a),l.staticMoving?w.copy(x):w.y+=(x.y-w.y)*this.dynamicDampingFactor))},this.panCamera=function(){var a=new THREE.Vector2,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.copy(B).sub(A),a.lengthSq()&&(a.multiplyScalar(r.length()*l.panSpeed),c.copy(r).cross(l.object.up).setLength(a.x),c.add(b.copy(l.object.up).setLength(a.y)),l.object.position.add(c),l.target.add(c),l.staticMoving?A.copy(B):A.add(a.subVectors(B,A).multiplyScalar(l.dynamicDampingFactor)))}}(),this.checkDistances=function(){l.noZoom&&l.noPan||(r.lengthSq()>l.maxDistance*l.maxDistance&&l.object.position.addVectors(l.target,r.setLength(l.maxDistance)),r.lengthSq()<l.minDistance*l.minDistance&&l.object.position.addVectors(l.target,r.setLength(l.minDistance)))},this.update=function(){r.subVectors(l.object.position,l.target),l.noRotate||l.rotateCamera(),l.noZoom||l.zoomCamera(),l.noPan||l.panCamera(),l.object.position.addVectors(l.target,r),l.checkDistances(),l.object.lookAt(l.target),o.distanceToSquared(l.object.position)>n&&(l.dispatchEvent(C),o.copy(l.object.position))},this.reset=function(){p=m.NONE,q=m.NONE,l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.up.copy(l.up0),r.subVectors(l.object.position,l.target),l.object.lookAt(l.target),l.dispatchEvent(C),o.copy(l.object.position)},this.domElement.addEventListener("contextmenu",function(a){a.preventDefault()},!1),this.domElement.addEventListener("mousedown",e,!1),this.domElement.addEventListener("mousewheel",h,!1),this.domElement.addEventListener("DOMMouseScroll",h,!1),this.domElement.addEventListener("touchstart",i,!1),this.domElement.addEventListener("touchend",k,!1),this.domElement.addEventListener("touchmove",j,!1),window.addEventListener("keydown",c,!1),window.addEventListener("keyup",d,!1),this.handleResize(),this.update()},THREE.TrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.TrackballControls.prototype.constructor=THREE.TrackballControls;var e=function(){return{Basic:function(a){return new THREE.MeshBasicMaterial({color:i.HEX(a)})},LineBasic:function(a){return new THREE.LineBasicMaterial({color:i.HEX(a)})}}}(),f=function(){return{Circle:function(a,b){},Line:function(a){var b=new THREE.Geometry;return b.vertices.push(new THREE.Vector3(a.x1,a.y1,a.z1)),b.vertices.push(new THREE.Vector3(a.x2,a.y2,a.z2)),new THREE.Line(b,e.LineBasic(a.color))}}}(),g=function(){return{Perspective:function(a){var b=100,c=1,d=1e3,e=0,f=0,g=0,h=window.innerWidth/window.innerHeight;a&&(b=a.fov||b,c=a.near||c,d=a.far||d,e=a.position.x||e,f=a.position.y||f,g=a.position.z||g,h=a.width/a.height||h);var i=new THREE.PerspectiveCamera(b,h,c,d);return i.position.set(e,f,g),i}}}(),h=function(){return{Trackball:function(a,b){var c=0,d=0,e=0;b&&(c=b.x||c,d=b.y||d,e=b.z||e);var f=new THREE.TrackballControls(a);return f.target.set(c,d,e),f}}}();a.prototype.type=function(b){var d=b;return"function"!=typeof a[d]&&console.error(c.about.name+" - Failed to construct VIEW - Caller:"+arguments.callee.caller.name),"function"!=typeof a[d].prototype.type&&(a[d].prototype=new a),new a[d]},a.prototype.setProperties=function(a){return this.properties=a,this},a.prototype.loadData=function(a){return this.load(a),this},a.prototype.toGroup=function(b){return this.meshes.forEach(function(a){b&&b instanceof THREE.Group&&b.add(a)}),a.meshes=[],this},a.axis=function(){this.type="axis",this.meshes=[],this.load=function(a){for(index=0;index<a.length;index++)if("g"===a[index].nodeName){var b=j.extractTranslation(a[index].attributes.extractNode("transform").nodeValue),d={x:parseInt(a[index].childNodes.extractNode("line").attributes.extractNode("x2").nodeValue),y:parseInt(a[index].childNodes.extractNode("line").attributes.extractNode("y2").nodeValue)},e=j.normalizeH(b.x)+c.model.canvas.offsets.x,g=j.normalizeV(b.y)-c.model.canvas.offsets.y,h=e+d.x,i=g-d.y;this.meshes.push(f.Line({x1:e,y1:g,z1:0,x2:h,y2:i,z2:0,color:"default"}))}else if("path"===a[index].nodeName)for(var k=j.extractSVGPath(a[index].attributes.extractNode("d").nodeValue),l=1;l<k.length;l++){var g=j.normalizeV(parseInt(k[l-1].y))-c.model.canvas.offsets.y;e=j.normalizeH(parseInt(k[l-1].x))+c.model.canvas.offsets.x,h=j.normalizeH(parseInt(k[l].x))+c.model.canvas.offsets.x,i=j.normalizeV(parseInt(k[l].y))-c.model.canvas.offsets.y,this.meshes.push(f.Line({x1:e,y1:g,z1:0,x2:h,y2:i,z2:0,color:"default"}))}}},a.circle=function(){this.type="circle",this.meshes=[],this.load=function(a){var b=this;a.forEach(function(a){var d=a.r.baseVal.value,f=a.cx.baseVal.value,g=a.cy.baseVal.value,h=i.HEX(a.style.cssText.slice(6)),k=j.normalizeH(f)+c.model.canvas.offsets.x;y=j.normalizeV(g)-c.model.canvas.offsets.y;var l=new THREE.Mesh(new THREE.CircleGeometry(d,64),e.Basic(h));l.position.set(k,y,0),b.meshes.push(l)})}};(function(){return{Ambient:function(a){var b=16777215;return a&&(b=i.HEX(a.color)||b),new THREE.AmbientLight(b)},Directional:function(a){var b=16777215,c=1,d=1,e=1;a&&(b=i.HEX(a.color)||b,c=a.x||c,d=a.y||d,e=a.z||e);var f=new THREE.DirectionalLight(b);return f.position.set(c,d,e).normalize(),f}}})();c.render=function(b){function d(){n.type("circle").loadData(c.model.content).toGroup(l),n.type("axis").setProperties({orientation:"horizontal"}).loadData(c.model.axis.x).toGroup(l),n.type("axis").setProperties({orientation:"vertical"}).loadData(c.model.axis.y).toGroup(l),c.model.content={},k.add(i),k.add(l),m.appendChild(j.domElement)}function e(){requestAnimationFrame(e),o.update(),f()}function f(){j.render(k,i)}var i,j,k,l,m,n,o;!function(){var f=function(){n=new a,k=new THREE.Scene,m=document.getElementById(b),i=g.Perspective({width:c.model.canvas.width,height:c.model.canvas.height,fov:115,position:{x:0,y:0,z:100}}),o=h.Trackball(i),l=new THREE.Group,l.position.set(0,0,0),j=new THREE.WebGLRenderer({antialias:!0}),j.setClearColor(16777215),j.setPixelRatio(window.devicePixelRatio),j.setSize(c.model.canvas.width||window.innerWidth,c.model.canvas.height||window.innerHeight)},p=function(){};f(),d(),e(),p()}()};var i=function(){return{HEX:function(a){var b=function(a){var b=a.toString(16);return 1==b.length?"0"+b:b};if(void 0==a||"string"!=typeof a||"default"==a)return"#000000";if("#"===a.charAt(0))return a.length>6?a.substring(0,7):a;var c,d,e,f=/\(([^)]+)\)/.exec(a)[1].split(",");return c=parseInt(f[0]),d=parseInt(f[1]),e=parseInt(f[2]),"#"+b(c)+b(d)+b(e)}}}();Object.prototype.extractNode=function(a){var b=this;if(a in this)b=this[a];else for(var c in this)if(this.hasOwnProperty(c)&&this[c].nodeName===a){b=this[c];break}return b};var j=function(){return{extractTranslation:function(a){if("string"!=typeof a)return{x:-1,y:-1};var b=/\(([^)]+)\)/.exec(a)[1].split(","),c=parseInt(b[0])||0,d=parseInt(b[1])||0;return{x:c,y:d}},extractSVGPath:function(a){var b=[],c=a.split(/(?=[MVHV])/);c.forEach(function(a,c){var d=a.charAt(0),e=a.substring(1).split(",");b.push("V"===d?{x:"V",y:e[0]}:"H"===d?{x:e[0],y:"H"}:{x:e[0],y:e[1]})});for(var d=1;d<b.length;d++)"V"==b[d].x&&(b[d].x=b[d-1].x),"H"==b[d].y&&(b[d].y=b[d-1].y);return b},normalizeV:function(a){return a<=c.model.canvas.height?c.model.canvas.height/2-a:-(c.model.canvas.height/2-a)},normalizeH:function(a){return a<=c.model.canvas.width?-(c.model.canvas.width/2-a):c.model.canvas.width/2-a}}}();window.d3=d}return c}();