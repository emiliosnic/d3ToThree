/*! d3to3 2015-05-16 */
var d3to3=function(){function a(b,c){if(arguments.length>2)[].forEach.call(arguments,function(c){a(b,c)});else for(var d in c)b[d]=c[d];return b}function b(){return this.canvas=function(){return e.model.canvas.width=this[0].extractNode("svg").width.baseVal.value,e.model.canvas.height=this[0].extractNode("svg").height.baseVal.value,this},this.axis=function(){return this.x=function(){return e.model.axis.x=this[0].extractNode("g").childNodes,this},this.y=function(){return e.model.axis.y=this[0].extractNode("g").childNodes,this},this},this.data=function(){return e.model.content=this[0],this},this}function c(){}function d(){}var e={},f={};if(e.loaded=!1,e.model={axis:{x:[],y:[]},content:[],canvas:{offsets:{x:40,y:20},width:null,height:null}},e.initializer={init:function(){"undefined"!=typeof d3&&window.WebGLRenderingContext&&document.createElement("canvas").getContext("webgl")&&(f=Object.create(d3),e.loaded=!0)}}.init(),observerFactory=new d,e.loaded){a(d3.selection.prototype,{d3to3:b}),e.scale={},e.svg={},e.layout={},e.event={},e.behavior={},e.geo={},e.geom={},e.ns=d3.ns,e.format=d3.format,e.random=d3.random,e.interpolators=d3.interpolators,e.svg.symbolTypes=d3.svg.symbolTypes,e.setup=function(){var a=f.selection.prototype.selectAll,b=f.selection.prototype.select,c=f.selection.prototype.data,d=f.selection.prototype.attr;hook_classed=f.selection.prototype.classed,hook_style=f.selection.prototype.style,hook_property=f.selection.prototype.property,hook_text=f.selection.prototype.text,hook_html=f.selection.prototype.html,hook_append=f.selection.prototype.append,hook_insert=f.selection.prototype.insert,hook_remove=f.selection.prototype.remove,hook_datum=f.selection.prototype.datum,hook_filter=f.selection.prototype.filter,hook_order=f.selection.prototype.order,hook_sort=f.selection.prototype.sort,hook_each=f.selection.prototype.each,hook_call=f.selection.prototype.call,hook_empty=f.selection.prototype.empty,hook_node=f.selection.prototype.node,hook_size=f.selection.prototype.size,hook_enter_append=f.selection.enter.prototype.append,hook_enter_empty=f.selection.enter.prototype.empty,hook_enter_node=f.selection.enter.prototype.node,hook_enter_call=f.selection.enter.prototype.call,hook_enter_select=f.selection.enter.prototype.select,hook_enter_insert=f.selection.enter.prototype.insert,hook_enter_size=f.selection.enter.prototype.size,f.selection.enter.prototype.empty=function(){return hook_enter_empty.apply(this,arguments)},f.selection.enter.prototype.node=function(){return hook_enter_node.apply(this,arguments)},f.selection.enter.prototype.call=function(){return hook_enter_call.apply(this,arguments)},f.selection.enter.prototype.select=function(){return hook_enter_select.apply(this,arguments)},f.selection.enter.prototype.insert=function(){return hook_enter_insert.apply(this,arguments)},f.selection.enter.prototype.size=function(){return hook_enter_size.apply(this,arguments)},f.selection.enter.prototype.append=function(){return hook_append.apply(this,arguments)},f.selection.prototype.selectAll=function(){return a.apply(this,arguments)},f.selection.prototype.select=function(){return b.apply(this,arguments)},f.selection.prototype.classed=function(){return hook_classed.apply(this,arguments)},f.selection.prototype.style=function(){return hook_style.apply(this,arguments)},f.selection.prototype.property=function(){return hook_property.apply(this,arguments)},f.selection.prototype.text=function(){return hook_text.apply(this,arguments)},f.selection.prototype.html=function(){return hook_html.apply(this,arguments)},f.selection.prototype.insert=function(){return hook_insert.apply(this,arguments)},f.selection.prototype.remove=function(){return hook_remove.apply(this,arguments)},f.selection.prototype.datum=function(){return hook_datum.apply(this,arguments)},f.selection.prototype.filter=function(){return hook_filter.apply(this,arguments)},f.selection.prototype.order=function(){return hook_order.apply(this,arguments)},f.selection.prototype.sort=function(){return hook_sort.apply(this,arguments)},f.selection.prototype.empty=function(){return hook_empty.apply(this,arguments)},f.selection.prototype.node=function(){return hook_node.apply(this,arguments)},f.selection.prototype.size=function(){return hook_size.apply(this,arguments)},f.selection.prototype.data=function(){return c.apply(this,arguments)},f.selection.prototype.call=function(){return hook_call.apply(this,arguments)},f.selection.prototype.each=function(){return hook_each.apply(this,arguments)},f.selection.prototype.attr=function(){return d.apply(this,arguments)},f.selection.prototype.append=function(){return hook_append.apply(this,arguments)},e.min=function(a,b){return f.min(a,b)},e.max=function(a,b){return f.max(a,b)},e.sum=function(a,b){return f.sum(a,b)},e.extend=function(a,b){return f.extend(a,b)},e.mean=function(a,b){return f.mean(a,b)},e.extend=function(a,b){return f.extend(a,b)},e.ascending=function(a,b){return f.ascending(a,b)},e.descending=function(a,b){return f.descending(a,b)},e.quantile=function(a,b){return f.quantile(a,b)},e.median=function(a,b){return f.median(a,b)},e.variance=function(a,b){return f.variance(a,b)},e.deviation=function(a,b){return f.deviation(a,b)},e.bisectLeft=function(a,b,c,d){return f.bisectLeft(a,b,c,d)},e.bisectRight=function(a,b,c,d){return f.bisectRight(a,b,c,d)},e.bisector=function(a){return f.bisector(a)},e.shuffle=function(a,b,c){return f.shuffle(a,b,c)},e.pairs=function(a){return f.pairs(a)},e.permute=function(a,b){return f.permute(a,b)},e.zip=function(){return f.zip()},e.transpose=function(a){return f.transpose(a)},e.keys=function(a){return f.keys(a)},e.values=function(a){return f.values(a)},e.entries=function(a){return f.entries(a)},e.map=function(a,b){return f.map(a,b)},e.nest=function(){return f.nest()},e.set=function(a){return f.set(a)},e.rebind=function(a,b){return f.rebind(a,b)},e.dispatch=function(){return f.dispatch()},e.requote=function(a){return f.requote(a)},e.select=function(a){return f.select(a)},e.selection=function(){return f.selection()},e.mouse=function(a){return f.mouse(a)},e.touch=function(a){return f.touch(a)},e.color=function(){return f.color()},e.hsl=function(a,b,c){return f.color(a,b,c)},e.hcl=function(a,b,c){return f.hcl(a,b,c)},e.lab=function(a,b,c){return f.lab(a,b,c)},e.rgb=function(a,b,c){return f.rgb(a,b,c)},e.geo.area=function(a){return f.geo.area(a)},e.geo.bounds=function(){return f.geo.bounds()},e.geo.centroid=function(a){return f.geo.centroid(a)},e.geo.clipExtent=function(){return f.geo.clipExtent()},e.geo.conicEqualArea=function(){return f.geo.conicEqualArea()},e.geo.albers=function(){return f.geo.albers()},e.geo.albersUsa=function(){return f.geo.albersUsa()},e.geo.path=function(){return f.geo.path()},e.geo.transform=function(a){return f.geo.transform(a)},e.geo.projection=function(a){return f.geo.projection(a)},e.geo.equirectangular=function(){return f.geo.equirectangular()},e.geo.rotation=function(a){return f.geo.rotation(a)},e.geo.circle=function(){return f.geo.circle()},e.geo.distance=function(a,b){return f.geo.distance(a,b)},e.geo.graticule=function(){return f.geo.graticule()},e.geo.greatArc=function(){return f.geo.greatArc()},e.geo.length=function(a){return f.geo.length(a)},e.geo.azimuthalEqualArea=function(){return f.geo.azimuthalEqualArea()},e.geo.azimuthalEquidistant=function(){return f.geo.azimuthalEquidistant()},e.geo.conicConformal=function(){return f.geo.conicConformal()},e.geo.conicEquidistant=function(){return f.geo.conicEquidistant()},e.geo.gnomonic=function(){return f.geo.gnomonic()},e.geo.mercator=function(){return f.geo.mercator()},e.geo.orthographic=function(){return f.geo.orthographic()},e.geo.stereographic=function(){return f.geo.stereographic()},e.geo.transverseMercator=function(){return f.geo.transverseMercator()},e.geo.stream=function(a,b){return f.geo.stream(a,b)},e.geo.interpolate=function(a,b){return f.geo.interpolate(a,b)},e.geo.projectionMutator=function(a){return f.geo.projectionMutator(a)},e.geom.hull=function(a){return f.geom.hull(a)},e.geom.polygon=function(a){return f.geom.polygon(a)},e.geom.voronoi=function(a){return f.geom.voronoi(a)},e.geom.delaunay=function(a){return f.geom.delaunay(a)},e.geom.quadtree=function(a,b,c,d,e){return f.geom.quadtree(a,b,c,d,e)},e.behavior.drag=function(){return f.behavior.drag()},e.functor=function(a){return f.functor(a)},e.xhr=function(a){return f.xhr(a)},e.dsv=function(a,b){return f.dsv(a,b)},e.csv=function(a,b){return f.csv(a,b)},e.tsv=function(a,b){return f.tsv(a,b)},e.touches=function(a,b){return f.touches(a,b)},e.interpolateZoom=function(a,b){return f.interpolateZoom(a,b)},e.behavior.zoom=function(){return f.behavior.zoom()},e.timer=function(a,b,c){return f.timer(a,b,c)},e.timer.flush=function(){return f.timer.flush()},e.round=function(a,b){return f.round(a,b)},e.formatPrefix=function(a,b){return f.formatPrefix(a,b)},e.locale=function(a){return f.locale(a)},e.interpolateRgb=function(a,b){return f.interpolateRgb(a,b)},e.interpolateObject=function(a,b){return f.interpolateObject(a,b)},e.interpolateRgbNumber=function(a,b){return f.interpolateRgbNumber(a,b)},e.interpolateString=function(a,b){return f.interpolateString(a,b)},e.interpolate=function(a,b){return f.interpolate(a,b)},e.interpolateArray=function(a,b){return f.interpolateArray(a,b)},e.ease=function(a){return f.ease(a)},e.interpolateHcl=function(a,b){return f.interpolateHcl(a,b)},e.interpolateHsl=function(a,b){return f.interpolateHsl(a,b)},e.interpolateLab=function(a,b){return f.interpolateLab(a,b)},e.interpolateRound=function(a,b){return f.interpolateRound(a,b)},e.interpolateTransform=function(a,b){return f.interpolateTransform(a,b)},e.transform=function(a){return f.transform(a)},e.transition=function(a,b){return f.transition(a,b)},e.scale.category10=function(){return f.scale.category10()},e.scale.category20=function(){return f.scale.category20()},e.scale.category20b=function(){return f.scale.category20b()},e.scale.category20c=function(){return f.scale.category20c()},e.scale.sqrt=function(){return f.scale.sqrt()},e.scale.pow=function(){return f.scale.pow()},e.scale.quantile=function(){return f.scale.quantile()},e.scale.threshold=function(){return f.scale.threshold()},e.scale.ordinal=function(){return f.scale.ordinal()},e.scale.log=function(){return f.scale.log()},e.layout.bundle=function(){return f.layout.bundle()},e.layout.chord=function(){return f.layout.chord()},e.layout.force=function(){return f.layout.force()},e.layout.hierarchy=function(){return f.layout.hierarchy()},e.layout.partition=function(){return f.layout.partition()},e.layout.pie=function(){return f.layout.pie()},e.layout.stack=function(){return f.layout.stack()},e.layout.histogram=function(){return f.layout.histogram()},e.layout.pack=function(){return f.layout.pack()},e.layout.tree=function(){return f.layout.tree()},e.layout.treemap=function(){return f.layout.treemap()},e.layout.cluster=function(){return f.layout.cluster()},e.svg.axis=function(){return f.svg.axis()},e.svg.arc=function(){return f.svg.arc()},e.svg.line=function(){return f.svg.line()},e.svg.brush=function(){return f.svg.brush()},e.svg.area=function(){return f.svg.area()},e.svg.area.radial=function(){return f.svg.area.radial()},e.svg.radial=function(){return f.svg.radial()},e.svg.chord=function(){return f.svg.chord()},e.svg.diagonal=function(){return f.svg.diagonal()},e.svg.diagonal.radial=function(){return f.svg.diagonal.radial()},e.svg.sumbol=function(){return f.svg.sumbol()},e.text=function(a){return f.text(a)},e.xml=function(a){return f.xml(a)},e.json=function(a,b){return f.json(a,b)},e.html=function(a,b){return f.html(a,b)}},c.prototype.type=function(a){var b=a;return"function"!=typeof c[b],"function"!=typeof c[b].prototype.type&&(c[b].prototype=new c),new c[b]},c.circle=function(){this.type="circle",this.meshes=[],this.loadDataInner=function(a){var b=this;a.forEach(function(a){var c,d,f=a.r.baseVal.value,h=a.cx.baseVal.value,i=a.cy.baseVal.value,k=g(a.style.cssText.slice(6));c=j.x(h),d=j.y(i),c+=e.model.canvas.offsets.x,d-=e.model.canvas.offsets.y;var l=(new THREE.MeshBasicMaterial({color:k}),new THREE.CircleGeometry(f,64)),m=new THREE.Mesh(l,new THREE.MeshBasicMaterial({color:k}));m.position.set(c,d,0),b.meshes.push(m)})}},c.axis=function(){this.type="axis",this.meshes=[],this.loadDataInner=function(a){for(i=0;i<a.length;i++)if("g"===a[i].nodeName){var b={x:0,y:0};b=h(a[i].attributes.extractNode("transform").nodeValue);var c=j.x(b.x)+e.model.canvas.offsets.x,d=j.y(b.y)-e.model.canvas.offsets.y,f={x:0,y:0};f.y=parseInt(a[i].childNodes.extractNode("line").attributes.extractNode("y2").nodeValue),f.x=parseInt(a[i].childNodes.extractNode("line").attributes.extractNode("x2").nodeValue);var g,l,m=new THREE.LineBasicMaterial({color:0}),n=new THREE.Geometry;isNaN(f.x)||isNaN(f.y)?"horizontal"===this.properties.orientation?(g=c,l=d+10):(g=c-10,l=d):(g=c+f.x,l=d+f.y),n.vertices.push(new THREE.Vector3(c,d,0)),n.vertices.push(new THREE.Vector3(g,l,0)),this.meshes.push(new THREE.Line(n,m))}else if("path"===a[i].nodeName){var o=k(a[i].attributes.extractNode("d").nodeValue);"horizontal"===this.properties.orientation&&(o.splice(-1,1),o.splice(-1,1));for(var p=o.length,q=1;p>q;q++){var r=parseInt(o[q-1].x),s=parseInt(o[q-1].y),t=o[q].x,u=o[q].y;"V"==o[q].x?(t=parseInt(o[q-1].x),o[q].x=parseInt(o[q-1].x)):"H"==o[q].y&&(u=parseInt(o[q-1].y),o[q].y=parseInt(o[q-1].y)),s=j.y(s)-e.model.canvas.offsets.y,r=j.x(r)+e.model.canvas.offsets.x,t=j.x(t)+e.model.canvas.offsets.x,u=j.y(u)-e.model.canvas.offsets.y,n.vertices.push(new THREE.Vector3(r,s,0)),n.vertices.push(new THREE.Vector3(t,u,0)),this.meshes.push(new THREE.Line(n,m))}}}},c.prototype.setProperties=function(a){return this.properties=a,this},c.prototype.loadData=function(a){return this.loadDataInner(a),this},c.prototype.toGroup=function(a){return this.meshes.forEach(function(b){a&&a instanceof THREE.Group&&a.add(b)}),c.meshes=[],this},e.render=function(a){function b(){l.type("circle").loadData(e.model.content).toGroup(j),l.type("axis").setProperties({orientation:"horizontal"}).loadData(e.model.axis.x).toGroup(j),l.type("axis").setProperties({orientation:"vertical"}).loadData(e.model.axis.y).toGroup(j),e.model.content={},i.add(g),i.add(j),h.render(i,g),k.appendChild(h.domElement)}function d(){requestAnimationFrame(d),f()}function f(){h.render(i,g)}var g,h,i,j,k,l;!function(){var b=function(){l=new c,i=new THREE.Scene,k=document.getElementById(a),g=new THREE.PerspectiveCamera(115,(e.model.canvas.width||window.innerWidth)/(e.model.canvas.height||window.innerHeight),1,1e3),g.position.set(0,0,100),j=new THREE.Group,j.position.set(0,0,0),h=new THREE.WebGLRenderer({antialias:!0}),h.setClearColor(16777215),h.setPixelRatio(window.devicePixelRatio),h.setSize(e.model.canvas.width||window.innerWidth,e.model.canvas.height||window.innerHeight)},d=function(){};b(),d()}(),b(),d()};var g=function(a){if(this.componentToHex=function(a){var b=a.toString(16);return 1==b.length?"0"+b:b},void 0==a||"string"!=typeof a)return"#000000";if("#"===a.charAt(0))return a.length>6?a.substring(0,7):a;var b,c,d,e=/\(([^)]+)\)/.exec(a)[1].split(",");return b=parseInt(e[0]),c=parseInt(e[1]),d=parseInt(e[2]),"#"+componentToHex(b)+componentToHex(c)+componentToHex(d)},h=function(a){if("string"!=typeof a)return{x:-1,y:-1};var b=/\(([^)]+)\)/.exec(a)[1].split(","),c=parseInt(b[0])||0,d=parseInt(b[1])||0;return{x:c,y:d}},j={};j.x=function(a){return a<=e.model.canvas.width?-(e.model.canvas.width/2-a):e.model.canvas.width/2-a},j.y=function(a){return a<=e.model.canvas.height?e.model.canvas.height/2-a:-(e.model.canvas.height/2-a)};var k=function(a){var b=[],c=a.split(/(?=[MVHV])/);return c.forEach(function(a,c){var d,e,f=a.charAt(0),g=a.substring(1),h=g.split(",");"V"===f?(d="V",e=h[0]):"H"===f?(d=h[0],e="H"):(d=h[0],e=-h[1]),b.push({x:d,y:e})}),b};d.queue=[],d.prototype.observe=function(){return[].forEach.call(arguments,function(a){a&&d.queue.push(a)}),this},d.prototype.then=function(a){return this.callback=a||{},this},d.prototype.expectKeyType=function(a){return this.expectedType=a,this},d.prototype.expectKey=function(a){return this.expectedKey=a,this},d.prototype.type=function(a){var b=a;return"function"!=typeof d[b],new d[b]},d.attr=function(){this.type="attr"},d.each=function(){this.type="each"},d.append=function(){this.type="append"},d.prototype.notify=function(a){var b=a.key||{},c=a.keyType||{},e=a.value||{},f=a.type||{};d.hasOwnProperty(f)&&d.queue.some(function(a,g){return a.type==f&&a.expectedKey==b||a.expectedType==c?("function"==typeof a.callback&&null!=e&&a.callback(e),d.queue.splice(g,1),!0):void 0})},Object.prototype.extractNode=function(a){var b=this;if(a in this)b=this[a];else for(var c in this)if(this.hasOwnProperty(c)&&this[c].nodeName===a){b=this[c];break}return b},e.setup(),window.d3=f}return e}();